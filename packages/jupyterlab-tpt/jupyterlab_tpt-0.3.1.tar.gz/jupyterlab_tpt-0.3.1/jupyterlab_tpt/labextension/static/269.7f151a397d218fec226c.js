"use strict";(self.webpackChunkjupyterlab_tpt=self.webpackChunkjupyterlab_tpt||[]).push([[269],{269:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o,a=n(350),d=n(919),l=n(850);!function(e){e[e.Get=0]="Get",e[e.Set=1]="Set",e[e.Unset=2]="Unset",e[e.Insert=3]="Insert",e[e.Remove=4]="Remove"}(o||(o={}));const c=e=>{if("string"==typeof e){const t=e;return 0===t.length?[]:t.split(".")}return e instanceof Array?e:(console.error(`xpath must be string or array, got ${e}`),[])},s=(e,t,n,a)=>{const{Get:d,Set:l,Unset:s,Insert:r,Remove:i}=o,m=(e,t,n,o)=>{if(0===n.length)return t===d?e:void 0;if(1===n.length){const[a]=n;switch(t){case d:return e[a];case l:return e[a]=o,o;case s:return a in e&&(delete e[a],!0);case r:if(a in e||(e[a]=[]),!(e[a]instanceof Array))return;{const t=e[a];return t.indexOf(o)<0?(t.push(o),o):void 0}case i:if(!(e[a]instanceof Array))return;const t=e[a],n=t.indexOf(o);return n>=0&&t.splice(n,1),o}}else{const[a,...c]=n;if(a in e){if(e[a]instanceof Object){const n=e[a];return m(n,t,c,o)}return}switch(t){case d:return;case l:e[a]={};const n=e[a];return m(n,t,c,o);case s:return;case r:return 0===c.length?(e[a]=[],m(e[a],t,c,o)):(e[a]={},m(e[a],t,c,o));case i:return}}},u=c(n);return m(e,t,u,a)},r=(e,t)=>s(e,o.Get,t,void 0),i=(e,t,n)=>s(e,o.Set,t,n),m=(e,t)=>((e,t)=>{const n=e=>e instanceof Array?0!==e.length:e instanceof Object?0!==Object.keys(e).length:"string"!=typeof e||0!==e.length,o=e=>e instanceof Array?(e=>e.map(o).filter(n))(e):e instanceof Object?(e=>{const t={};for(const a in e){const d=e[a],l=o(d);n(l)&&(t[a]=l)}return t})(e):e,a=c(t);if(0===a.length)return o(e);{const t=r(e,a);return void 0===t?e:i(e,a,o(t))}})(e,t),u=(e,t,n)=>{e instanceof l.Cell&&(e=e.model),t=c(t);const[o,...a]=t,d=e.getMetadata(o);return void 0===d?n:r(d,a)},p=(e,t,n)=>{t=c(t);const[o,...a]=t,d=e.model.getMetadata(o);if(0===a.length)return e.model.setMetadata(o,n),n;const l=d||{},s=i(l,a,n);return e.model.setMetadata(o,l),s},g=(e,t)=>{t=c(t);const[n,...a]=t,d=e.model.getMetadata(n);if(void 0===d)return!1;if(0===a.length)return e.model.deleteMetadata(n),!0;{const t=((e,t)=>s(e,o.Unset,t,void 0))(d,a);return e.model.setMetadata(n,d),t}};var f;!function(e){e[e.All=0]="All",e[e.Active=1]="Active",e[e.Multiple=2]="Multiple"}(f||(f={}));const v=(e,t,n)=>{var o;const a=null===(o=e.currentWidget)||void 0===o?void 0:o.content;if(void 0===a)return;let d;if(t===f.All)d=a.widgets.slice();else{const e=a.activeCell;if(null===e)return;if(t===f.Active)d=[e];else{const{anchor:t,head:n}=a.getContiguousSelection();d=null===t||null===n?[e]:a.widgets.slice(t,n+1)}}d.forEach(n)},h=(e,t)=>{t?(p(e,"hide_input",!0),((e,t,n)=>{t=c(t);const[a,...d]=t,l=e.model.getMetadata(a);if(0===d.length){let t;return void 0!==l?(t=l,t=t.slice()):t=[],t.indexOf(n)<0?(t.push(n),e.model.setMetadata(a,t),n):void 0}{const t=l||{},c=((e,t,n)=>s(e,o.Insert,t,n))(t,d,n);e.model.setMetadata(a,t)}})(e,"tags","hide-input")):(g(e,"hide_input"),((e,t,n)=>{t=c(t);const[a,...d]=t,l=e.model.getMetadata(a);if(void 0!==l){if(0===d.length){if(!(l instanceof Array))return;const t=l.slice(),o=t.indexOf(n);if(o<0)return;return t.splice(o,1),e.model.setMetadata(a,t),n}{const t=l,c=((e,t,n)=>s(e,o.Remove,t,n))(t,d,n);e.model.setMetadata(a,t)}}})(e,"tags","hide-input"))},y="tools.sample_from",b=(e,t)=>{e instanceof l.CodeCell&&-1!==e.model.sharedModel.getSource().toLowerCase().indexOf(y)&&h(e,t)},k=(e,t)=>{d.NotebookActions.changeCellType(e,"markdown");const n=null==e?void 0:e.activeCell;if(void 0===n)return;const o=null==n?void 0:n.model;if(void 0!==o){for(let e=4;e>0;e--)o.sharedModel.setSource(o.sharedModel.getSource().replace("#".repeat(e)+" ",""));0!==t&&o.sharedModel.setSource(`${"#".repeat(t)} ${o.sharedModel.getSource()}`)}},C={id:"jupyterlab-tpt:plugin",autoStart:!0,requires:[a.ICommandPalette,d.INotebookTracker],activate:(e,t,n)=>{let o;console.log("extension jupyterlab-tpt is activating"),o="convenience:hide-input",e.commands.addCommand(o,{label:"hide input for all selected cells",execute:()=>v(n,f.Multiple,(e=>h(e,!0)))}),t.addItem({command:o,category:"Convenience"}),o="convenience:show-input",e.commands.addCommand(o,{label:"show input for all selected cells",execute:()=>v(n,f.Multiple,(e=>h(e,!1)))}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:["Ctrl Alt 9"],selector:".jp-Notebook"}),o="convenience:toggle-show-input",e.commands.addCommand(o,{label:"toggle show input for all selected cells",execute:()=>v(n,f.Multiple,(e=>(e=>{u(e,"tags.hide-input")?h(e,!1):h(e,!0)})(e)))}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:["Alt Cmd 9"],selector:".jp-Notebook"}),o="convenience:hide-input-all-samples",e.commands.addCommand(o,{label:`hide input for all code cells that contain ${y}`,execute:()=>v(n,f.All,(e=>b(e,!0)))}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:["Alt Cmd 8"],selector:".jp-Notebook"}),o="convenience:show-input-all-samples",e.commands.addCommand(o,{label:`show input for all code cells that contain ${y}`,execute:()=>v(n,f.All,(e=>b(e,!1)))}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:["Ctrl Alt 8"],selector:".jp-Notebook"}),o="convenience:metadata-clean",e.commands.addCommand(o,{label:"clean metadata for all selected cells",execute:()=>v(n,f.Multiple,(e=>((e,t)=>{t=c(t);const[n,...o]=t;if(void 0===n){console.log(e.model.metadata);for(const t of Object.entries(e.model.metadata)){const n=t,o=m(u(e,n),"");void 0===o||0===o.length?g(e,n):p(e,n,o)}}else{const t=u(e,n),a=m(t,o);void 0===a||0===a.length?g(e,n):p(e,n,a)}})(e,"")))}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:["Alt Cmd 7"],selector:".jp-Notebook"});for(let a=0;a<5;a++)o=`convenience:section-level-${a}`,e.commands.addCommand(o,{label:`active cell becomes section level ${a}`,execute:()=>{var e;const t=null===(e=n.currentWidget)||void 0===e?void 0:e.content;void 0!==t&&k(t,a)}}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:[`Ctrl ${a}`],selector:".jp-Notebook"});const a=e=>{"markdown"===e.model.type&&(e.rendered=!1)};o="notebook:unrender-all-markdown",e.commands.addCommand(o,{label:"unrender all markdown cells",execute:()=>v(n,f.All,a)}),t.addItem({command:o,category:"Convenience"}),e.commands.addKeyBinding({command:o,keys:["Ctrl E"],selector:".jp-Notebook.jp-mod-commandMode"}),e.commands.addKeyBinding({command:"notebook:render-all-markdown",keys:["Ctrl W"],selector:".jp-Notebook"}),e.commands.addKeyBinding({command:"notebook:move-cell-up",keys:["U"],selector:".jp-Notebook.jp-mod-commandMode"}),e.commands.addKeyBinding({command:"notebook:move-cell-down",keys:["D"],selector:".jp-Notebook.jp-mod-commandMode"})}}}}]);