function miniumRequestStack(){if(!global.__minium_request_stack){global.__minium_request_stack=new Map,global.__minium_wait_util=function(e=0,t=20){var _=(getCurrentPages().pop()||{}).__wxWebviewId__;return new Promise((r=>{var a=10*t,i=setInterval((()=>{a--;var t=global.__minium_request_stack.has(_)?global.__minium_request_stack.get(_).size:0;console.debug("[minitest] current stack size: ",t),t<=e?(clearInterval(i),r(!0)):a<0&&(clearInterval(i),r(!1))}),100)}))};var e=wx._MINI_WX_PROXY_||wx,t=e.request;return Object.defineProperty(e,"request",{configurable:!0,get:()=>function(e){if("https://weapp.tencent.com/jscov_driver/CollectCovTimer"==e.url)return t(e);var _,r=(getCurrentPages().pop()||{}).__wxWebviewId__;global.__minium_request_stack.has(r)?_=global.__minium_request_stack.get(r):(_=new Map,global.__minium_request_stack.set(r,_));var a,i=e.complete;e.complete=e=>{_.delete(a),0===_.size&&global.__minium_request_stack.delete(r),i&&i(e)};var n=t(e);return a=n&&n.uniqueId||Math.random(),_.set(a,Date.now()),n}}),!0}return!1}
